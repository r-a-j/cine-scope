<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="goHome()">
        <ion-icon name="arrow-back-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Search</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <!-- Segment Toggle -->
  <ion-toolbar>
    <ion-segment [(ngModel)]="segmentValue" (ionChange)="segmentChanged($event)">
      <ion-segment-button value="movies">
        <ion-label>Movies</ion-label>
      </ion-segment-button>
      <ion-segment-button value="tv">
        <ion-label>TV</ion-label>
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>

  <!-- Searchbar Toolbar with Paste Button -->
  <ion-toolbar class="search-toolbar">
    <div class="search-wrapper">
      <ion-searchbar 
        [(ngModel)]="searchQuery" 
        placeholder="Search here..." 
        show-clear-button="always" 
        (ionInput)="search()">
      </ion-searchbar>
      <button *ngIf="!searchQuery" class="paste-btn" (click)="pasteFromClipboard()">
        PASTE
      </button>
    </div>
  </ion-toolbar>
  
  <!-- Search Results -->
  <div class="grid" *ngIf="segmentValue === 'movies'">
    <div class="grid-item" *ngFor="let movie of movieResults">
      <img [src]="getImageUrl(movie.poster_path)" [alt]="movie.title" />
      <p>{{ movie.title }}</p>
    </div>
  </div>

  <div class="grid" *ngIf="segmentValue === 'tv'">
    <div class="grid-item" *ngFor="let tv of tvResults">
      <img [src]="getImageUrl(tv.poster_path)" [alt]="tv.name" />
      <p>{{ tv.name }}</p>
    </div>
  </div>

  <!-- Loader/Error -->
  <div class="ion-padding" *ngIf="loading">Loading...</div>
  <div class="ion-padding" *ngIf="error">
    <ion-text color="danger">{{ error }}</ion-text>
  </div>

</ion-content>